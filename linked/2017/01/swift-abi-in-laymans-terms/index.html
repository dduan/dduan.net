<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Swift ABI In Layman's terms</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,600">
  <link rel="stylesheet" href="/style.css">
  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Daniel Duan" href="/feed.xml" />
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Swift ABI In Layman’s terms | Daniel Duan</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Swift ABI In Layman’s terms" />
<meta name="author" content="Daniel Duan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An oldie but goodie from Swift Evelution. Slava’s answer:" />
<meta property="og:description" content="An oldie but goodie from Swift Evelution. Slava’s answer:" />
<link rel="canonical" href="https://duan.ca/linked/2017/01/swift-abi-in-laymans-terms/" />
<meta property="og:url" content="https://duan.ca/linked/2017/01/swift-abi-in-laymans-terms/" />
<meta property="og:site_name" content="Daniel Duan" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-01-16T22:44:38-08:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@daniel_duan" />
<meta name="twitter:creator" content="@Daniel Duan" />
<script type="application/ld+json">
{"description":"An oldie but goodie from Swift Evelution. Slava’s answer:","author":{"@type":"Person","name":"Daniel Duan"},"@type":"BlogPosting","url":"https://duan.ca/linked/2017/01/swift-abi-in-laymans-terms/","headline":"Swift ABI In Layman’s terms","dateModified":"2017-01-16T22:44:38-08:00","datePublished":"2017-01-16T22:44:38-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://duan.ca/linked/2017/01/swift-abi-in-laymans-terms/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
  <div class="container">
    <header class="masthead">
  <h1 class="masthead-title--small">
    <a href="/">Daniel Duan</a>
  </h1>
</header>
<div class="content post">
    <h1 class="post-title"><a href="https://lists.swift.org/pipermail/swift-evolution/Week-of-Mon-20160808/026153.html">Swift ABI In Layman's terms</a></h1>
  <div class="post-date">
    <time>16 Jan 2017</time>
  </div>
  <p>An oldie but goodie from Swift Evelution.
<a href="https://twitter.com/slava_pestov">Slava</a>’s answer:</p>

<blockquote>
  <p>“when we talk about the ABI, we’re really talking about three orthogonal
“axes” along which we would like to “move” without breaking compatibility with
existing binaries:”</p>

  <ul>
    <li>
      <p>The first axis is the machine-level calling conventions and memory layout.
For example, what registers to pass function arguments and returns in, the
rules for alignment and padding of fields in an aggregate type, which entry
points the Swift runtime exports and what their behavior should be. Once we
commit to a stable ABI along this axis, you will get interoperability between
<em>compiler versions</em> – the same exact library built with one version of the
compiler will remain compatible with clients after being recompiled with
another version, because their conventions will match up. Note that this does
not help you if the library itself changes in any way.</p>
    </li>
    <li>
      <p>The second axis is the resilience work I called out in my previous e-mail.
Here, we’re trying to define language features and implementation techniques
that allow a library to evolve in a forward-compatible manner, as long as the
developer follows certain guidelines. Here, the goal is if you should be able
to compile your library, make some changes to add new APIs, and recompile it
<em>with the same compiler</em><a class="backlink" rel="canonical" title="From duan.ca" href=https://duan.ca/linked/2017/01/swift-abi-in-laymans-terms/>,</a> without breaking downstream clients, as long as you
follow the library evolution guidelines (Also, you can imagine one day having
an ‘ABI diff’ tool to automate this).  &gt;</p>
    </li>
    <li>
      <p>The third axis is the standard library itself. Stability of runtime
interfaces and the extra indirection to enable resilience is all great, but it
won’t help you as long as the standard library API is evolving in a
non-backwards compatible manner – for example, if we remove a method on
String. So once the other two areas have been addressed, the last thing to lock
down is the standard library interface itself.</p>
    </li>
  </ul>
</blockquote>

<p>The rest of the thread is worth reading too. John McCall gave an high level
<a href="https://lists.swift.org/pipermail/swift-evolution/Week-of-Mon-20160808/026145.html">description</a>.</p>

<p>The definitive source for Slava’s third axes is the <a href="https://github.com/apple/swift/blob/master/docs/LibraryEvolution.rst">Library
Evolution</a>
doc from the Swift repository.</p>

</div>

  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)
    },i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-59501714-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
