<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mobile Development on dduan.net</title>
    <link>http://dduan.net/tags/mobile-development/</link>
    <description>Recent content in Mobile Development on dduan.net</description>
    <generator>Hugo -- gohugo.io</generator>
    
    
    
    
    <lastBuildDate>Fri, 11 Jan 2013 21:28:59 -0600</lastBuildDate>
    <atom:link href="http://dduan.net/tags/mobile-development/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>&#34;Hello, World!&#34; The Hard Way with Sencha Touch</title>
      <link>http://dduan.net/post/2013/01/hello-world-the-hard-way-with-sencha-touch/</link>
      <pubDate>Fri, 11 Jan 2013 21:28:59 -0600</pubDate>
      
      <guid>http://dduan.net/post/2013/01/hello-world-the-hard-way-with-sencha-touch/</guid>
      <description>&lt;p&gt;When I first got into the amazing Sencha Touch HTML5 framwork, it came across
as a compilation of visual components that looks mobile, &lt;a href=&#34;http://compass-style.org&#34;&gt;easily themable&lt;/a&gt;,
leverage the latest HTML5 technology to be efficient and, best
of all, are created within the Javascript code as oppose to being shoved
in to an HTML file and demand DOM tinkering later.&lt;/p&gt;

&lt;p&gt;But a closer look would reveal a lot more goodies beyond those handy
components in Sencha Touch. It offers &lt;a href=&#34;http://docs.sencha.com/touch/2-1/#!/guide/class_system&#34;&gt;a class system&lt;/a&gt;, a &lt;a href=&#34;http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-1&#34;&gt;M&lt;/a&gt;&lt;a href=&#34;http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-2&#34;&gt;V&lt;/a&gt;&lt;a href=&#34;http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-3&#34;&gt;C&lt;/a&gt;
&lt;a href=&#34;http://www.sencha.com/blog/architecting-your-app-with-sencha-touch-2-mvc&#34;&gt;pattern&lt;/a&gt;, tools that handles code dependency, compression and native
packaging, etc. Albeit daunting, learning and embracing all of those offerings
makes a quite enjoyable coding experience and rewards me with development
effieciency overall.&lt;/p&gt;

&lt;p&gt;Sometimes though, I need complete control of a visual component that doesn&amp;rsquo;t
exist in the framework. How to make this work with everything mentioned above
is implied in various tutorials posted by the Sencha team, but I couldn&amp;rsquo;t find
a clear illustration of that, which is why I decided to write one here.&lt;/p&gt;

&lt;p&gt;Here&amp;rsquo;s our goal: make a component that displays data from a model with our own
custom HTML; manage it along with some provided components from the framework
and follow the MVC pattern.&lt;/p&gt;

&lt;p&gt;I assume you have the basics set up. I&amp;rsquo;m using Sencha Cmd 3.0.0.250, Sencha
Touch SDK 2.1.0 and OS X Mountain Lion as of this writing.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s start by generating a MVC-ready skeleton project called HelloWorld. Go to
the SDK&amp;rsquo;s folder and type:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    sencha generate app HelloWorld ~/helloworld
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;replace the last parameter with the path you would like for the project files
to stay. We&amp;rsquo;ll be working in this folder from now on.&lt;/p&gt;

&lt;p&gt;In the skeleton project, a main view was created under &lt;code&gt;app/view/Main.js&lt;/code&gt; and
declared as dependency for &lt;code&gt;app.js&lt;/code&gt;. An instance of it is created when the app
finished loading. We&amp;rsquo;ll keep this setup as our main view. Let&amp;rsquo;s reduce
&lt;code&gt;app/view/Main.js&lt;/code&gt; to a simplest possble form for our purposes:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    Ext.define(&#39;HelloWorld.view.Main&#39;, {
      extend: &#39;Ext.Container&#39;,
      config: {
        items: [ { xtype: &#39;helloview&#39; } ]
      }
    });
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Following the convention, we name the class in corrispondance with its
filepath within the &lt;code&gt;app&lt;/code&gt; folder (&amp;lsquo;view/Main.js&amp;rsquo; =&amp;gt; &amp;lsquo;view.Main&amp;rsquo;). All
classes created with &lt;code&gt;Ext.define&lt;/code&gt; should follow this convention so that Sencha
tools can relate code dependencies to file structure and do its magic for us.
We&amp;rsquo;ll circle back to this.&lt;/p&gt;

&lt;p&gt;Our main view will be a plain container and has a &lt;code&gt;helloview&lt;/code&gt; in it. An
&lt;code&gt;Ext.Container&lt;/code&gt; has the ability to &amp;hellip; contain stuff. Specifically, it can
organize &lt;code&gt;Ext.Component&lt;/code&gt;s visually. &lt;code&gt;helloview&lt;/code&gt; will be that component. Let&amp;rsquo;s
define it next.&lt;/p&gt;

&lt;p&gt;Create the file &lt;code&gt;app/view/HelloView.js&lt;/code&gt; as the following:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    Ext.define(&#39;HelloWorld.view.HelloView&#39;, {
      extend: &#39;Ext.Component&#39;,
      xtype: &#39;helloview&#39;,
      config: {
        tpl: &#39;&amp;lt;div class=&amp;quot;greeting&amp;quot;&amp;gt;Hello, {name}!&amp;lt;/div&amp;gt;&#39;
      }
    });
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As promised, &lt;code&gt;HelloWorld.view.HelloView&lt;/code&gt; is a &lt;code&gt;Ext.Component&lt;/code&gt;. We declare its
&lt;code&gt;xtype&lt;/code&gt; to be the one we used in the main view. The really interesting part is
its &lt;code&gt;tpl&lt;/code&gt; configuration. This is where our customization integrates with the
rest of the Sencha Touch framework, so it&amp;rsquo;s worth dive into a bit deeper.&lt;/p&gt;

&lt;p&gt;(&lt;em&gt;Caution&lt;/em&gt;: &lt;code&gt;tpl&lt;/code&gt; can not be mixed with &lt;code&gt;items&lt;/code&gt;, if you want standard components
mixed in with yours, make them share a container and arrange a proper layout
there.)&lt;/p&gt;

&lt;p&gt;Take a look at the official &lt;a href=&#34;http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-cfg-tpl&#34;&gt;documentation for &lt;code&gt;tpl&lt;/code&gt;&lt;/a&gt;. It accepts an
&lt;a href=&#34;http://docs.sencha.com/touch/2-1/#!/api/Ext.XTemplate&#34;&gt;&lt;code&gt;Ext.XTemplate&lt;/code&gt;&lt;/a&gt;, which is basically free-range HTML plus some syntax to
insert data provided to the component. Apply all your HTML skills here! For
illustration purposes, we only throw in a basic &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;{name}&lt;/code&gt; part will be replaced by the actual data, which every
&lt;code&gt;Ext.Component&lt;/code&gt; has as a configuration option by default. Being such option
means two things:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1. You can specify its value in the class definition, as we did for `tpl`.
2. It gets a &amp;quot;getter/setter&amp;quot; that let you query/change its value at anytime
    through the instance&#39;s existence.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We&amp;rsquo;ll use the setter for &lt;code&gt;data&lt;/code&gt; &amp;ndash; &lt;code&gt;setData()&lt;/code&gt; to populate this field in the
template later. &lt;code&gt;setData()&lt;/code&gt; accept one raw Javascript object and make its
properties accessible to the template.&lt;/p&gt;

&lt;p&gt;Next, let&amp;rsquo;s make a simplistic model in &lt;code&gt;app/model/Greetee.js&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    Ext.define(&#39;HelloWorld.model.Greetee&#39;, {
      extend: &#39;Ext.data.Model&#39;,
      config: {
        fields: [&#39;name&#39;]
      }
    });
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A model, with a field &amp;lsquo;name&amp;rsquo;. Hey, that&amp;rsquo;s &lt;code&gt;as simple as possible, but no
simpler&lt;/code&gt;, Einstein would endorse it!&lt;/p&gt;

&lt;p&gt;We won&amp;rsquo;t use any proxy or store in conjunction with the model because we
only need to show how a customized view works within the Sencha Touch MVC
pattern. Speaking of which, a controller does just that. So to tie everything
togeter, here&amp;rsquo;s &lt;code&gt;app/controller/Main.js&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    Ext.define(&#39;HelloWorld.controller.Main&#39;, {
      extend: &#39;Ext.app.Controller&#39;,
      config: {
        models: [&#39;Greetee&#39;],
        views: [&#39;HelloView&#39;],
        refs: {
          helloView: &#39;.helloview&#39;
        }
      },
      launch: function() {
        var m = Ext.create(&#39;HelloWorld.model.Greetee&#39;, { name: &#39;World&#39; });
        return this.getHelloView().setData(m.getData());
      }
    });
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To get reference to the view components, Sencha Touch provide &lt;code&gt;refs&lt;/code&gt; in
controllers, through which we map &lt;code&gt;hello&lt;/code&gt; to our customized component&amp;rsquo;s xtype.
There are more details about this in the &lt;a href=&#34;http://docs.sencha.com/touch/2-1/#!/guide/controllers&#34;&gt;offical documentation&lt;/a&gt;. We now
can use &lt;code&gt;getHelloView()&lt;/code&gt; in other methods. &lt;code&gt;launch()&lt;/code&gt; gets invoked after
everything gets loaded, and we tie the model and the view together here.&lt;/p&gt;

&lt;p&gt;Again, a little imagination might help. By that I mean the data source of the
model could be from a RESTful network API, a picture from a phone camera via
Phonegap, a record from browser&amp;rsquo;s localstorage, etc. We simply created one in
memory for illustration.&lt;/p&gt;

&lt;p&gt;We use &lt;code&gt;getHelloView()&lt;/code&gt; to get reference to our &lt;code&gt;helloview&lt;/code&gt; instance, then use
its &lt;code&gt;setData()&lt;/code&gt; to populate its template field. But we can&amp;rsquo;t pass in the model
object directly (as mentioned above, a raw Javascript object is needed), so
we convert it with its &lt;code&gt;getData()&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;Finally, we specify the &lt;code&gt;models&lt;/code&gt; and &lt;code&gt;views&lt;/code&gt; involved with this controller in
&lt;code&gt;config&lt;/code&gt; so that the files of these classes gets loaded properly. For the same
purpose, we need to open &lt;code&gt;app.js&lt;/code&gt; and add the following line into the object
passed to &lt;code&gt;Ext.application()&lt;/code&gt; (which is a controller too):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    controllers: [&#39;Main&#39;],
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This makes the framework aware of our &lt;code&gt;HelloWorld.controller.Main&lt;/code&gt;. It&amp;rsquo;s
unnecessary to use the full class name becaue we followed the naming
convention.&lt;/p&gt;

&lt;p&gt;At this point, our code is complete. Go to the project folder in terminal
and fire up a web server:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    python -m SimpleHTTPServer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Open &lt;a href=&#34;http://localhost:8000&#34;&gt;http://localhost:8000&lt;/a&gt; in your browser and take a gander!&lt;/p&gt;

&lt;p&gt;A screenshot of this app would be an overkill, if you follow along correctly,
the phrase &amp;ldquo;Hello, World!&amp;rdquo; will show, and that&amp;rsquo;s all.&lt;/p&gt;

&lt;p&gt;So this long-winded excercise results in not much. But I hope you won&amp;rsquo;t find
it pointless. When I try to construct my app UI with Sencha Touch, I first try
my best to make the Senche component work with the design. When breaking out
and customize is inevitable, I try to stay within the framwork as much as
possible to make the most out of it. What&amp;rsquo;s described in this article is a
common way to do that.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Integrating Sencha Touch 2 and Cordova (pre-2.0)</title>
      <link>http://dduan.net/post/2012/08/integrating-sencha-touch-2-and-cordova-pre-20/</link>
      <pubDate>Mon, 20 Aug 2012 19:09:34 -0600</pubDate>
      
      <guid>http://dduan.net/post/2012/08/integrating-sencha-touch-2-and-cordova-pre-20/</guid>
      <description>

&lt;h2 id=&#34;the-goals:ae823e1ecb8b3019ca89a6317b5cc1cd&#34;&gt;&amp;ldquo;The Goals&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Use Sencha Command to create and package an MVC-structured Sencha Touch 2
project.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Use Cordova/PhoneGap (1.9) to wrap the project to deliver it in the App
Store.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Leverage the APIs provided by Cordova/PhoneGap to give Sencha Touch 2
project more native capabilities.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;the-process:ae823e1ecb8b3019ca89a6317b5cc1cd&#34;&gt;The Process&lt;/h2&gt;

&lt;p&gt;Goal #1 and #2 can be achieved by &lt;a href=&#34;http://robertdougan.com/posts/packaging-sencha-touch-2-with-phonegap-cordova&#34; title=&#34;&amp;quot;Packaging Sencha Touch 2 with PhoneGap (Cordova)&amp;quot;&amp;quot;&#34;&gt;these steps well described by Robert Dougan
&lt;/a&gt;. In essence, you need to create a normal Sencha Touch 2 project
using Sencha Command; a Cordova (1.7 in Roberts post, but works fine with 1.9)
project. Then tell Sencha Command to build in the &lt;code&gt;www&lt;/code&gt; folder, where Cordova
looks for the HTML5 assets to package. Finally, build and deploy the Cordova
project the usual way.&lt;/p&gt;

&lt;p&gt;That, of course, is not the end of the story, otherwise you wouldn&amp;rsquo;t be
reading this. When you try to achive goal #3, that is, when you use the
Cordova API in the Sencha Touch project, such as:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    navigator.notification.alert(
        &#39;Winter is coming!&#39;,
        noted, // callback function
        &#39;be warned&#39;,
        &amp;quot;&amp;quot;Yes M&#39;lord&amp;quot;&amp;quot;
    );
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sencha Command will report error and refuse to &amp;ldquo;&amp;ldquo;compile&amp;rdquo;&amp;rdquo; if you run&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    sencha app build package
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;because of the unknown namespace introduced by Cordova.&lt;/p&gt;

&lt;p&gt;One way to workaround this problem is manually replacing the command, which
involves compiling the SASS files, consolidate all Javascript dependencies
into a single file, minify everything and move the result to the &lt;code&gt;www&lt;/code&gt;
folder.&lt;/p&gt;

&lt;p&gt;Doesn&amp;rsquo;t sound fun, does it?&lt;/p&gt;

&lt;p&gt;So, here&amp;rsquo;s a trick to put Sencha Command back on track, use&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    if (!Ext.os.is.Desktop) {
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;to wrap around the Cordova API calls, so the previous example becomes&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    if (!Ext.os.is.Desktop) {
        navigator.notification.alert(
            // ...
        );
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This way, Sencha Command will ignore the conditioned code block since its
running on the desktop environment, therefore compiles like a charm. And the
code will work as intended in emulator/device environment.&lt;/p&gt;

&lt;p&gt;You are welcome.&lt;/p&gt;

&lt;h2 id=&#34;the-bonus:ae823e1ecb8b3019ca89a6317b5cc1cd&#34;&gt;The Bonus&lt;/h2&gt;

&lt;p&gt;Now that you are using Sencha Touch 2 and Cordova API (like a boss!), here&amp;rsquo;s
another tip to improve your workflow. When I&amp;rsquo;m developing hybrid apps, I spend
the majority of time editing Java(Coffee)script/(S)CSS files. But surely
enough, there will come a period where I have to debug the packaged app in the
emulator. Switching from my text editor (Vim) to XCode and hitting ⌘r
REALLY gets old.&lt;/p&gt;

&lt;p&gt;Luckily, Cordova provides some command line alternatives. If
you generate a Cordova project as described in
&lt;a href=&#34;http://docs.phonegap.com/en/2.0.0/guide_command-line_index.md.html#Command-Line%20Usage&#34; title=&#34;&amp;quot;Cordova Command-Line Documentaion&amp;quot;&#34;&gt;Cordova&amp;rsquo;s documentaion&lt;/a&gt; like so:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;./path/to/cordova-ios/bin/create /path/to/project com.example.name Project
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There&amp;rsquo;ll be a folder called &lt;code&gt;cordova&lt;/code&gt; in the newly created project, which won&amp;rsquo;t
be in your project if you create it with XCode with &lt;a href=&#34;http://robertdougan.com/posts/packaging-sencha-touch-2-with-phonegap-cordova&#34; title=&#34;&amp;quot;Packaging Sencha Touch 2 with PhoneGap (Cordova)&amp;quot;&amp;quot;&#34;&gt;Robert&amp;rsquo;s method&lt;/a&gt;.
In &lt;code&gt;cordova&lt;/code&gt; folder are three lovely Bash scripts that let&amp;rsquo;s you compile the
XCode project (&lt;code&gt;debug&lt;/code&gt;, which also does the next thing), run the result in  an
ios emulator (&lt;code&gt;emulate&lt;/code&gt;) and watch the logging information (&lt;code&gt;log&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Copy the folder to the path of &lt;code&gt;YourProject.xcodeproj&lt;/code&gt;, and boom! You can now
quit XCode and run the scripts in there directly from your terminal. (What I like to
do is to use GNU Make to combine Sencha commands with those scripts so that
I could just hit ⌘b in MacVim to make my latest code run in the simulator.)&lt;/p&gt;

&lt;p&gt;Happy coding!&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>